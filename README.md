# 111 年度資料庫程式設計作業 - 投票 / 問卷系統

## 主頁（未登入）

- 會員**登入**按鈕
- 會員**註冊**按鈕
- 中上有**廣告牆**的置入
- 主體，**投票列表**
- 下方 footer 顯示**頁尾版權**

## 投票列表（未登入）

- 有**搜尋匡**可以用關鍵字搜尋投票主題
- **分類選單**，裡面有各種類別可以進行篩選想要找的類別主題
-
- 下面的 table
-
- **類別**
- **投票主題**
- **單複選題**，可以排序
- **投票期間**，顯示投票起迄日期以及時間，可以排序
- **剩餘時間**，顯示剩餘天數、小時、分鐘、秒，如果**顯示剩餘時間**，代表還可以投票，如果顯示**暫時關閉**，表示**被管理員暫時關閉**，縱使時間還沒截止，還是不能投票，**投票已結束**代表時間已截止，已不能投票，可以排序
- **總投票人數**
- 超過十筆，將以**分頁呈現**
- **hover**上去有**變色**以及**放大**的效果
- 點擊投票主題**可以查看結果但不能投票**，顯示**登入按鈕**，登入後即可投票

## 投票列表（已登入）

呈上部分

- **顯示已投過跟未投過的區別**，**已投過的主題**背景會變淺藍，hover 也沒效果，反之**未投過的主題**，背景不變，hover 變粉紅、放大

## 登入頁面

- **帳號、密碼、驗證碼輸入頁面**
- **帳號、密碼驗證**
- **加入驗證碼驗證**，如有看不清的情形，可以按重新產生驗證碼的按鈕
- 下方有**尚未註冊**、**忘記密碼**的連結

## 會員註冊

- **帳號**
- **密碼**
- **再次輸入密碼**
- **名字**
- **生日**
- **住址**
- **電子郵件**
- **密碼提示**
- 如果有**相同的帳號**註冊過，將**不能再註冊**
- **密碼格式限制**：密碼須包含**大寫、小寫、數字，且長度須介於 8~16，且以 md5 編碼儲存**
- overflow 的話，scroll

## 忘記密碼

- 輸入忘記密碼的**帳號**
- 輸入註冊時的**電子郵件**
- 如果成功驗證的話需**輸入符合格式的密碼兩次**才能重設密碼
- **重設成功後，導回登入頁面**

## 會員中心

- **序號**
- **帳號**
- **密碼**，不顯示，但提供**修改密碼**的功能，**修改密碼**需要輸入**舊密碼驗證**，再輸入兩次符合和格式的**新密碼**
- **姓名**
- **生日**
- **地址**
- **電子郵件**
- **密碼提示**
- **等級**，如果是一般會員，顯示**一般會員**，如果是管理員，則顯示**管理員**
- 下方有**編輯**的按鈕，進入**編輯會員的頁面**，**帳號是不能被更動的**，密碼則是需要在會員中心進行**修改密碼**的動作，其餘的項目均可自行修改後送出
- **刪除會員**的功能，按下去將刪除對應的會員資料，**只顯示在一般會員，管理員帳號不顯示**

## 投票結果頁面（記名投票）

- 最上方**顯示投票主題、記名投票**
- 顯示**總投票數**
- **顯示已投過這個主題的帳號**
- **顯示各個選項有哪些使用者投過票**
- **顯示各個選項的名稱、投票數、比例（以長條圖顯示）**
- **如果當前帳號對這個主題還沒投過票，則可以投票，反之則顯示您已投過票，並有重新投票的按鈕可以重新投票，重新投票將影響三張資料表，按下去將會還原成原來還沒投票的狀態**
- **加入年齡限制**

## 投票結果頁面（不記名投票）

- **不顯示**已投過的帳號
- **不顯示**各個選項有哪些使用者投過票
- 其他功能跟記名投票一樣

## 新增投票（管理員）

- **類別**，選擇想要的類別
- **投票主題**
- **開始日期**
- **開始時間**
- **結束日期**
- **結束時間**
- **年齡限制**
- **單選或複選**
- **選項**，可以新增選項
- **新增按鈕**送出

## 分類管理（管理員）

- 可以**新增類別**
- **避免新增有相同名稱的類別**

## 投票管理中心（管理員）

- 有**搜尋匡**可以利用關鍵字查詢投票主題
- 左上有**新增投票**的按鈕
- **分類選單**，裡面有各種類別可以進行篩選想要找的類別主題
-
- 下面的 table
-
- **類別**
- **投票主題**
- **單複選題**，可以排序
- **投票期間**，顯示投票起迄日期以及時間，可以排序
- **剩餘時間**，顯示剩餘天數、小時、分鐘、秒，如果顯示剩餘時間，代表還可以投票，如果顯示**暫時關閉**，表示被管理員暫時關閉，縱使時間還沒截止，還是不能投票，投票已結束代表時間已截止，已不能投票，可以排序
- **總投票人數**
- 超過十筆，將以**分頁呈現**
- **hover 上去有變色以及放大的效果**
-
- **操作（編輯、刪除、開關、記名）**
-
- **編輯**，編輯投票的各項資訊
- **刪除**，刪除指定的投票主題
- **開關**，**一鍵開啟或關閉投票主題**，不管日期是否截止都有效，**暫時關閉的主題顯示淡灰色以利辨認**
- **記名**，控制投票主題是否記名，**記名投票的主題，按鈕會變橘色以利辨認**

## 會員列表（管理員）

- **ID**
- **Account**
- **Name**
- **Birthday**
- **Address**
- **E-mail**
- **會員等級**：一般會員或是管理員
- **刪除使用者**：一般會員被可以刪除，管理員可以調降**其他管理員**帳號，變成一般會員後才能刪除其帳號，**管理員自己不能刪除**
- **權限調整**：**一般會員**可以被**提高等級**，**管理員可以調降其他管理員帳號**，變成一般會員，**管理員自己不能調權限**
- 如果是**管理員**帳號將會顯示**土黃色背景色**以利辨認

# 資料表設計 - 資料庫名稱：s1110222

- users
  |名稱|型態|預設值|A_I|備註|
  |--|--|--|--|--|
  |id|int(11)|--|true|序號|
  |acc|varchar(12)|--|--|帳號|
  |pw|varchar(32)|--|--|密碼|
  |name|varchar(12)|--|--|名稱|
  |birthday|date|--|--|生日|
  |addr|varchar(64)|--|--|住址|
  |email|varchar(36)|--|--|email|
  |passnote|int(36)|--|--|密碼提示|
  |admin|int(1)|0|--|區分是否是管理者|
- subjects
  |名稱|型態|預設值|A_I|備註|
  |--|--|--|--|--|
  |id|int(11)|--|true|序號|
  |subject|varchar(128)|--|--|主題描述|
  |type_id|int(11)|--|--|主題類別|
  |multiple|boolean(1)|--|--|單/複選|
  |mulit_limit|tinyint(2)|1|--|單/複選項目數|
  |start|date|--|--|開始時間|
  |starttime|date|--|--|開始時間|
  |end|date|--|--|結束時間|
  |endtime|date|--|--|結束時間|
  |total|int(11)|--|--|投票人數統計|
  |switch|int(1)|1|--|投票主題開關|
  |secret|int(1)|0|--|記名投票與不記名投票|
  |age_limit|int(3)|18|--|年齡限制|
- options
  |名稱|型態|預設值|A_I|備註|
  |--|--|--|--|--|
  |id|int(11)|--|true|序號|
  |option|varchar(128)|--|--|選項描述|
  |subject_id|int(11)|--|--|主題|
  |total|int(11)|--|--|投票人數統計|

- log
  |名稱|型態|預設值|A_I|備註|
  |--|--|--|--|--|
  |id|int(11)|--|true|序號|
  |user_id|int(11)|--|--|投票者|
  |sujbect_id|int(11)|--|--|投票項目|
  |option_id|int(11)|--|--|選項|
  |vote_time|timestamp|--|--|投票時間|

- type
  |名稱|型態|預設值|A_I|備註|
  |--|--|--|--|--|
  |id|int(11)|--|true|序號|
  |name|varchar(128)|--|--|分類名稱|
